{"version":3,"sources":["components/Form.js","components/Filter.js","components/Persons.js","components/Notification.js","services/Persons.js","App.js","index.js"],"names":["Form","onSubmit","newValues","changeHandler","newName","newNumber","nameChangeHandler","numberChangeHandler","value","onChange","type","Filter","filter","Person","name","number","delHandler","onClick","Persons","persons","delPerson","map","p","key","Notification","message","error","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","setPersons","setNewName","setNewNumber","setFilter","setMessage","useEffect","PersonsService","initialPersons","personsToShow","toLowerCase","includes","console","log","length","event","preventDefault","personObject","existingPerson","updatedPerson","window","confirm","catch","concat","setTimeout","target","person","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fc059c56.chunk.js","sourcesContent":["import React from 'react';\n\n\nconst Form = ({onSubmit, newValues, changeHandler}) => {\n  const [newName, newNumber] = newValues\n  const [nameChangeHandler, numberChangeHandler] = changeHandler\n  return (\n    <form onSubmit={onSubmit}>\n      <div>\n        Name: <input value={newName} onChange={nameChangeHandler} />\n      </div>\n      <div>\n        Number: <input value={newNumber} onChange={numberChangeHandler} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n  \nexport default Form","import React from 'react';\n\n\nconst Filter = ({filter, changeHandler}) => {\n  return (\n    <div>\n      Filter names shown with (case-insensitive): <input\n        value={filter} onChange={changeHandler}\n      />\n    </div>\n  )\n}\n\nexport default Filter","import React from 'react';\n\n\n\n\nconst Person = ({ name, number, delHandler}) => {\n  return (\n    <dt>{name}: {number} <button onClick={delHandler}>delete</button></dt>\n  )\n}\n\nconst Persons = ({ persons, delPerson}) => {\n  return (\n    <dl>\n      {persons.map((p) => <Person key={p.name} name={p.name} number={p.number} \n                          delHandler={() => delPerson(p)}/>)}\n    </dl>\n  )\n}\n\nexport default Persons","import React from 'react';\n\n\nconst Notification = ({ message, error }) => {\n  if (message === null) {\n    return null\n  }\n  const style = {\n    color: (error) ? 'red' : 'green',\n    background: 'lightgrey',\n    fontSize: 20,\n    borderStyle: 'solid',\n    borderRadius: 5,\n    padding: 10,\n    marginBottom: 10,\n  }\n\n  return (\n    <div style={style}>\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n  return axios.get(baseUrl).then(response => response.data)\n}\n\nconst create = newObject => {\n  return axios.post(baseUrl, newObject).then(response => response.data)\n}\n\nconst update = (id, newObject) => {\n  return axios.put(`${baseUrl}/${id}`, newObject).then(response => response.data)\n}\n\nconst delete_ = (id) => {\n  return axios.delete(`${baseUrl}/${id}`)\n}\n\nexport default { getAll, create, update, delete_}","import React, { useState, useEffect } from 'react'\nimport Form from './components/Form'\nimport Filter from './components/Filter'\nimport Persons from './components/Persons'\nimport Notification from './components/Notification'\nimport PersonsService from './services/Persons'\n\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [message, setMessage] = useState([null, 0]) // [msg, error]\n\n  useEffect(() => {\n    PersonsService.getAll().then(initialPersons => setPersons(initialPersons))\n  }, [])  // []: only run during the 1st render\n  \n  const personsToShow = (filter === '') \n                      ? persons \n                      : persons.filter(p => \n                        p.name.toLowerCase().includes(filter)\n                      )\n  console.log('render', personsToShow.length, 'persons')\n\n\n  const nameChangeHandler = (event) => {\n    const name = event.target.value\n    setNewName(name)\n  }\n\n  const numberChangeHandler = (event) => {\n    const number = event.target.value\n    setNewNumber(number)\n  }\n\n  const filterChangeHandler = (event) => {\n    const filter = event.target.value\n    setFilter(filter)\n  }\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const personObject = {'name': newName, 'number': newNumber}\n    let existingPerson = persons.filter(p => p.name === newName)\n    \n    if (existingPerson.length !== 0) {\n      const updatedPerson = { ...existingPerson[0], number: newNumber }\n      if (window.confirm(`${newName} is already added to phonebook, `\n          + `replace the old number with a new one?`)) {\n        PersonsService\n          .update(updatedPerson.id, updatedPerson)\n          .catch(error => {\n            setMessage(\n              [`Information of ${newName} was already removed from server. `, 1]\n            )\n          })\n          .then(setPersons(persons.filter(p => p.name !== newName)\n                                  .concat(updatedPerson)))\n          .then(setNewName(''))\n          .then(setNewNumber(''))\n          .then(setMessage(\n            [`Updated ${newName}`, 0]\n          ))\n          .then(setTimeout(() => {\n            setMessage([null, null])\n          }, 1000))\n      }\n    } else {\n      PersonsService.create(personObject)\n        .then(data => {\n          setPersons(persons.concat({ ...personObject, id: data.id }))\n        })\n        .then(setNewName(''))\n        .then(setNewNumber(''))\n        .then(setMessage(\n          [`Added ${newName}`, 0]\n        ))\n        .then(setTimeout(() => {\n          setMessage([null, null])\n        }, 1000))\n    }\n  }\n\n  const delPerson = (person) => {\n    if (!persons.map(p => p.id).includes(person.id)) {\n      console.log(`No person ${person.id}`)\n    } else if (window.confirm(`Delete ${person.name}?`)) {\n        PersonsService.delete_(person.id)\n          .then(setPersons(persons.filter(p => p.id !== person.id)))\n    }\n  }\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n      <Notification message={message[0]} error={message[1]}/>\n      <h2>Add a new</h2>\n        <Form  onSubmit={addPerson} newValues={[newName, newNumber]} \n        changeHandler={[nameChangeHandler, numberChangeHandler]} />\n      <h2>Numbers</h2>\n      <Filter filter={filter} changeHandler={filterChangeHandler}/>\n      <Persons persons={personsToShow} delPerson={delPerson}/>\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}